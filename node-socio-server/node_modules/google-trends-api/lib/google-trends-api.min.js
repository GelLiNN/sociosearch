!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("https"),require("querystring")):"function"==typeof define&&define.amd?define("google-trends-api",["https","querystring"],t):"object"==typeof exports?exports["google-trends-api"]=t(require("https"),require("querystring")):e["google-trends-api"]=t(e.https,e.querystring)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=n(o);t["default"]={interestByRegion:(0,i["default"])("interest by region"),interestOverTime:(0,i["default"])("interest over time"),relatedQueries:(0,i["default"])("related queries"),relatedTopics:(0,i["default"])("related topics")},e.exports=t["default"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t["default"]=function(e){return function(t,r){var o=(0,n.constructObj)(t,r),i=o.cbFunc,u=o.obj;return u instanceof Error?Promise.reject(i(u)):(0,n.getResults)(e,u).then(function(e){return i(null,e)})["catch"](function(e){return Promise.reject(i(e))})}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return Math.abs(t-e)/864e5<7}function i(e,t){var r=(e.getUTCMonth()+1).toString();r=r.length<2?"0"+r:r;var n=e.getUTCDate().toString(),o=e.getUTCFullYear().toString(),i=e.getUTCHours(),u=e.getUTCMinutes();return t?o+"-"+r+"-"+n+"T"+i+"\\:"+u+"\\:00":o+"-"+r+"-"+n}function u(e){if(e.startTime&&!(e.startTime instanceof Date))return new Error("startTime must be a Date object");if(e.endTime&&!(e.endTime instanceof Date))return new Error("endTime must be a Date object");if(e.startTime&&e.endTime&&e.startTime>e.endTime){var t=e.startTime;e.startTime=e.endTime,e.endTime=t}e.endTime||(e.endTime=new Date),e.startTime||(e.startTime=new Date("2004-01-01"));var r=o(e.startTime,e.endTime),n=i(e.startTime,r),u=i(e.endTime,r);return e.time=n+" "+u,e}function s(e,t){return"function"==typeof e&&(t=e),!e||e&&"object"!==("undefined"==typeof e?"undefined":p(e))||Array.isArray(e)?e=new Error("Must supply an object"):e.keyword||(e=new Error("Must have a keyword field")),t&&"function"!=typeof t&&(e=new Error("Callback function must be a function")),e.hl||(e.hl="en-US"),t||(t=function(e,t){return e?e:t}),e=u(e),{cbFunc:t,obj:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=["COUNTRY","REGION","CITY","DMA"],r=t.some(function(t){return t===e.toUpperCase()});return r?e.toUpperCase():""}function f(e){try{return JSON.parse(e.slice(4)).widgets}catch(t){throw t.requestBody=e,t}}function c(e){return Array.isArray(e.keyword)?e.keyword.reduce(function(t,r){return t.push(l({},e,{keyword:r})),t},[]):[e]}function d(e,t){var r={"interest over time":{path:"/trends/api/widgetdata/multiline",pos:0},"interest by region":{path:"/trends/api/widgetdata/comparedgeo",pos:1,resolution:a(t.resolution)},"related topics":{path:"/trends/api/widgetdata/relatedsearches",pos:2},"related queries":{path:"/trends/api/widgetdata/relatedsearches",pos:3}},n={method:"GET",host:"trends.google.com",path:"/trends/api/explore",qs:{hl:t.hl,req:JSON.stringify({comparisonItem:c(t),cat:0}),tz:300}},o=r[e],i=o.pos,u=o.path,s=o.resolution;return(0,y["default"])(n).then(function(e){var r=f(e),n=r[i].request;s&&(n.resolution=s),n=JSON.stringify(n);var o=r[i].token,a={path:u,method:"GET",host:"trends.google.com",qs:{hl:t.hl,req:n,token:o,tz:300}};return(0,y["default"])(a)}).then(function(e){return e.slice(5)})}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isLessThan7Days=o,t.convertDateToString=i,t.formatTime=u,t.constructObj=s,t.formatResolution=a,t.parseResults=f,t.formatKeywords=c,t.getResults=d;var m=r(3),y=n(m)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.method,r=e.host,n=e.path,o=e.qs,i={host:r,method:t,path:n+"?"+a["default"].stringify(o)};return new Promise(function(e,t){var r=u["default"].request(i,function(t){var r="";t.on("data",function(e){r+=e}),t.on("end",function(){e(r.toString("utf8"))})});r.on("error",function(e){t(e)}),r.end()})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=r(4),u=n(i),s=r(5),a=n(s);e.exports=t["default"]},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("querystring")}])});
//# sourceMappingURL=google-trends-api.min.js.map